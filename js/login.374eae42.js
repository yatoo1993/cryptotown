(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{dd7b:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login big-bg common"},[s("div",{staticClass:"md-form"},[s("h3",{staticClass:"title"},[t._v("登录")]),s("md-field",[s("md-input-item",{attrs:{placeholder:t.msg},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}},[s("span",{staticClass:"input-icon icon-user",attrs:{slot:"left"},slot:"left"})]),s("md-input-item",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[s("span",{staticClass:"input-icon icon-secret",attrs:{slot:"left"},slot:"left"})]),s("div",{staticClass:"forget-link"},[s("router-link",{attrs:{to:"/forget"}},[t._v("忘记密码？")])],1),s("div",{staticClass:"submit-btn"},[s("md-button",{attrs:{type:"primary",round:""},on:{click:t.submit}},[t._v("登录")])],1),s("div",{staticClass:"sign-link"},[s("router-link",{attrs:{to:"/register"}},[t._v("立即注册")])],1)],1)],1)])},i=[],o=(s("d3b7"),s("5530")),r=s("365c"),a=s("5880"),c={name:"login",data:function(){return{username:"",password:"",address:""}},computed:Object(o["a"])({},Object(a["mapGetters"])(["useMobile"]),{msg:function(){return this.useMobile?"请输入手机号或邮箱":"请输入邮箱"}}),methods:{getAddress:function(){return new Promise((function(t,e){if(window.ethereum&&window.ethereum.selectedAddress)return t(window.ethereum.selectedAddress);window.imToken?window.imToken.callAPI("user.getCurrentAccount",(function(s,n){s?e(s):t(n)})):e("imToken is not defined")}))},checkAccount:function(){var t=this;this.getAddress().then((function(e){return t.address=e})).catch(console.error)},submit:function(){var t=this;return this.username?this.password?void Object(r["d"])({username:this.username,password:this.password,imtoken_eth_address:this.address}).then((function(e){var s=e.token;window.localStorage.setItem("token",s),t.$toast.succeed("登陆成功",500),t.$router.push("/"),t.$store.dispatch("getUserInfo")})):this.$toast.info("请输入密码"):this.$toast.info(this.msg)}},created:function(){this.checkAccount()}},d=c,u=s("2877"),l=Object(u["a"])(d,n,i,!1,null,null,null);e["default"]=l.exports}}]);