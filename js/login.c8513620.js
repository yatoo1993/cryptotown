(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{dd7b:function(t,s,e){"use strict";e.r(s);var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"login big-bg common"},[e("div",{staticClass:"md-form"},[e("h3",{staticClass:"title"},[t._v("登录")]),e("md-field",[e("md-input-item",{attrs:{placeholder:"请输入手机号/邮箱"},model:{value:t.username,callback:function(s){t.username=s},expression:"username"}},[e("span",{staticClass:"input-icon icon-user",attrs:{slot:"left"},slot:"left"})]),e("md-input-item",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}},[e("span",{staticClass:"input-icon icon-secret",attrs:{slot:"left"},slot:"left"})]),e("div",{staticClass:"forget-link"},[e("router-link",{attrs:{to:"/forget"}},[t._v("忘记密码？")])],1),e("div",{staticClass:"submit-btn"},[e("md-button",{attrs:{type:"primary",round:""},on:{click:t.submit}},[t._v("登录")])],1),e("div",{staticClass:"sign-link"},[e("router-link",{attrs:{to:"/register"}},[t._v("立即注册")])],1)],1)],1)])},i=[],o=(e("d3b7"),e("365c")),r={name:"login",data:function(){return{username:"",password:"",address:""}},methods:{getAddress:function(){return new Promise((function(t,s){if(window.ethereum&&window.ethereum.selectedAddress)return t(window.ethereum.selectedAddress);window.imToken?window.imToken.callAPI("user.getCurrentAccount",(function(e,n){e?s(e):t(n)})):s("imToken is not defined")}))},checkAccount:function(){var t=this;this.getAddress().then((function(s){return t.address=s})).catch(console.error)},submit:function(){var t=this;return this.username?this.password?void Object(o["d"])({username:this.username,password:this.password,imtoken_eth_address:this.address}).then((function(s){var e=s.token;window.localStorage.setItem("token",e),t.$toast.succeed("登陆成功",500),t.$router.push("/"),t.$store.dispatch("getUserInfo")})):this.$toast.info("请输入密码"):this.$toast.info("请输入手机号或邮箱")}},created:function(){this.checkAccount()}},a=r,c=e("2877"),d=Object(c["a"])(a,n,i,!1,null,null,null);s["default"]=d.exports}}]);